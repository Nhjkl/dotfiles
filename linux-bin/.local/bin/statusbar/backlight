#!/bin/sh

# A dwm_bar module to display the current backlight brighness with xbacklight
# Joe Standring <git@joestandring.com>
# GNU GPLv3

# Dependencies: xbacklight

progress() {
 str1=$1
 str2=$2
 count=$3
 num=$4
 diff="$[$3-$4]"

 if [[ $num -ne 0 ]]; then
   v1=$(printf "%0.s${str1}" $(seq 1 $num))
 fi

 if [[ $diff -ne 0 ]]; then
   v2=$(printf "%0.s${str2}" $(seq 1 $diff))
 fi

 echo "${v1}${v2}"
}

light="$(xbacklight | cut -d '.' -f1)"

num="$[$light / 10]"

val=$(progress "I" "_" 10 $num)

dwm_backlight () {
    echo "â˜€ "$val
}

dwm_backlight
